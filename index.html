<!DOCTYPE html>
<html>
  <head>
    <title>HOME - よりよい防災マップ</title>
    <meta charset="utf-8">

    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <!--CSS-->
    <link href="./style.css" rel="stylesheet">

    <!--Bootstrap-->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz" crossorigin="anonymous"></script>
    <!-- font -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=M+PLUS+1p:wght@400;800&display=swap" rel="stylesheet">
    <!-- map -->
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" integrity="sha256-p4NxAoJBhIIN+hmNHrzRCf9tD/miZyoHS5obTRR9BMY=" crossorigin=""/>
    <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js" integrity="sha256-20nQCchB9co0qIjJZRGuk2/Z9VM+kNiyxNV1lvTlZBo=" crossorigin=""></script>
    <script src="https://unpkg.com/leaflet-omnivore@0.3.4/leaflet-omnivore.min.js">c</script>
    <style type="text/css">

      a{
        color: #000;
        text-decoration: none;
      }

      .link{
        text-decoration: underline;
      }

      .link:hover{
        font-weight: bold;
      }

      @media (min-width: 1000px) {
        .txt-more-narrow-down{
          font-size: 15px;
        }
      }

      summary {
        list-style-type: none;
      }
      summary::-webkit-details-marker {
        display: none;
      }
      summary:before {
        content: "＋";
      }
      details[open] summary:before,
      summary details[open] summary:before {
        content: "−";
      }

      .display_map {
        display: flex;
        justify-content: flex-start;
        padding: 0;
      }

      #infoFlood,#infoDebrisFlow{
        margin-top: 5px;
        margin-left: 20px;
      }
      @media (max-width: 999px) {
        #infoFlood{
          width:80px;
        }
      }
      @media (min-width: 1000px) {
        #infoFlood{
          width:150px;
        }
      }

      #map{
        z-index: 0;
      }

      @media (max-width: 999px) {
        #map{
          min-width: 70%;
        }
      }
      @media (min-width: 1000px) {
        #map{
          /*width: 1050px;*/
          width: clamp(500px,50vw,1500px) !important;
        }
      }

      /*絞り込み欄*/
      @media (max-width: 999px) {
        .filter-field{
          width: 150px;
        }
      }
      @media (min-width: 1000px) {
        .filter-field{
          max-width:260px !important;
        }
      }

      .div-checkbox{
          display: flex;
          align-items: center;
          margin-top:5px;
        }
      @media (min-width: 1000px){
        .div-checkbox{
          margin-top:0.5em;
        }
      }

      .filter-spots{
        padding-left: 10px;
        padding-bottom:5px;
        border: 1px solid #255b2f;
      }

      .filter-restricted-area{
        padding-left: 10px;
        padding-bottom:5px;
        border: 1px solid #255b2f;
        margin-bottom: 10px;
      }

      /*チェックボックスサイズ*/
      @media (max-width: 999px) {
        .form-check-input{
          margin-bottom: 0;
          font-size: 10px;
        }
      }
      @media (min-width: 1000px) {
        .form-check-input{
          font-size: 15px;
        }
      }

      /*チェックボックスアイコン*/
      @media (max-width: 999px) {
        .form-check-icon{
          width: 10px;
          margin-right: 2px;
        }
      }
      @media (min-width: 1000px) {
        .form-check-icon{
          width: 20px;
          margin-left: 5px;
          margin-right: 5px;
        }
      }

      /*チェックボックスラベル*/
      .form-check-label{
        margin-left: 5px;
      }
      @media (max-width: 999px) {
        .form-check-label{
          font-size: 8px;
        }
      }
      @media (min-width: 1000px) {
        .form-check-label{
          font-size: 15px;
        }
      }


      /*さらに絞り込む*/
      .txt-more-narrow-down{
        color:rgb(226, 157, 28);
      }
      @media (max-width: 999px) {
        .txt-more-narrow-down{
          font-size: 10px;
        }
      }
      @media (min-width: 1000px) {
        .txt-more-narrow-down{
          font-size: 15px;
        }
      }

      .install-link{
        margin-left: 25px;
        margin-bottom: 5px;
        padding : 10px 5px;
        border: 1px dotted #3b864a;
        width: 250px;
      }

      #modal[hidden] {
        display: none;
      }

      #modal {
        position: fixed;
        inset: 0;
      }

      .backdrop {
        position: absolute;
        inset: 0;
        z-index:2000;
        background: rgba(0,0,0,.4);
      }

      .panel {
        position: relative;
        z-index: 2500;
        margin: 10vh auto;
        max-width: 480px;
        background: #fff;
        padding: 1.25rem;
        border-radius: .75rem;
      }

      body.modal-open {
        overflow: hidden;
      }
    </style>
  </head>

  <body class="font">

  <!-- モーダル -->
  <!--<div id="modal" role="dialog" aria-modal="true" aria-labelledby="modal-title" onclick="closeModal()"  hidden>
    <div class="backdrop" onclick="closeModal()" data-close></div>
    <div class="panel" role="document">
      <h2 id="modal-title">お知らせ</h2>
      <p>ページ読み込み直後に表示されるモーダルです。</p>
      <button id="closeBtn" type="button" data-close>再生</button>
    </div>
  </div>
-->

    <header>
      <div class="site-header-pc">
        <div class="title">
          <img src="./Icon/top_icon.png" alt="icon">
          <h1>よりよい防災マップ @Web</h1>
          <!--<h3 class="font_mid position-absolute end-0 me-5 bottom-0" style="color: #3b864a;">長野工業高校</h3>-->
        </div>
        <!-- リンクタブ -->
        <nav class="navbar navbar-expand-lg bg-body-tertiary shadow pt-4">
          <div class="container-fluid">
            <ul class="navbar-nav d-flex">
              <li class="nav-item">
                <a class="nav-selected" aria-current="page" href="./index.html">
                  <div class="nav-content">
                    <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" fill="currentColor" class="bi bi-house-door-fill" viewBox="0 0 16 16">
                      <path d="M6.5 14.5v-3.505c0-.245.25-.495.5-.495h2c.25 0 .5.25.5.5v3.5a.5.5 0 0 0 .5.5h4a.5.5 0 0 0 .5-.5v-7a.5.5 0 0 0-.146-.354L13 5.793V2.5a.5.5 0 0 0-.5-.5h-1a.5.5 0 0 0-.5.5v1.293L8.354 1.146a.5.5 0 0 0-.708 0l-6 6A.5.5 0 0 0 1.5 7.5v7a.5.5 0 0 0 .5.5h4a.5.5 0 0 0 .5-.5"/>
                    </svg>
                    <div class="nav-content-link" style="text-decoration: none;">HOME</div>
                  </div>
                </a>
              </li>
              <li class="nav-item">
                <a aria-current="page" href="./about.html">
                  <div class="nav-content">
                    <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" fill="currentColor" class="bi bi-exclamation-circle-fill" viewBox="0 0 16 16">
                      <path d="M16 8A8 8 0 1 1 0 8a8 8 0 0 1 16 0M8 4a.905.905 0 0 0-.9.995l.35 3.507a.552.552 0 0 0 1.1 0l.35-3.507A.905.905 0 0 0 8 4m.002 6a1 1 0 1 0 0 2 1 1 0 0 0 0-2"/>
                    </svg>
                    <div class="nav-content-link" style="font-size: small;">よりよい防災マップとは</div>
                  </div>
                </a>
              </li>
              <li class="nav-item">
                <a aria-current="page" href="./detail.html">
                  <div class="nav-content">
                    <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" fill="currentColor" class="bi bi-geo-alt-fill" viewBox="0 0 16 16">
                      <path d="M8 16s6-5.686 6-10A6 6 0 0 0 2 6c0 4.314 6 10 6 10m0-7a3 3 0 1 1 0-6 3 3 0 0 1 0 6"/>
                    </svg>
                    <div class="nav-content-link">掲載情報について</div>
                  </div>
                </a>
              </li>
              <li class="nav-item">
                <a aria-current="page" href="./howto.html">
                  <div class="nav-content">
                    <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" fill="currentColor" class="bi bi-question-circle-fill" viewBox="0 0 16 16">
                      <path d="M16 8A8 8 0 1 1 0 8a8 8 0 0 1 16 0M5.496 6.033h.825c.138 0 .248-.113.266-.25.09-.656.54-1.134 1.342-1.134.686 0 1.314.343 1.314 1.168 0 .635-.374.927-.965 1.371-.673.489-1.206 1.06-1.168 1.987l.003.217a.25.25 0 0 0 .25.246h.811a.25.25 0 0 0 .25-.25v-.105c0-.718.273-.927 1.01-1.486.609-.463 1.244-.977 1.244-2.056 0-1.511-1.276-2.241-2.673-2.241-1.267 0-2.655.59-2.75 2.286a.237.237 0 0 0 .241.247m2.325 6.443c.61 0 1.029-.394 1.029-.927 0-.552-.42-.94-1.029-.94-.584 0-1.009.388-1.009.94 0 .533.425.927 1.01.927z"/>
                    </svg>
                    <div class="nav-content-link">使い方</div>
                  </div>
                </a>
              </li>
              <li class="nav-item">
                <a aria-current="page" href="./info.html">
                  <div class="nav-content">
                    <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" fill="currentColor" class="bi bi-info-circle-fill" viewBox="0 0 16 16">
                      <path d="M8 16A8 8 0 1 0 8 0a8 8 0 0 0 0 16m.93-9.412-1 4.705c-.07.34.029.533.304.533.194 0 .487-.07.686-.246l-.088.416c-.287.346-.92.598-1.465.598-.703 0-1.002-.422-.808-1.319l.738-3.468c.064-.293.006-.399-.287-.47l-.451-.081.082-.381 2.29-.287zM8 5.5a1 1 0 1 1 0-2 1 1 0 0 1 0 2"/>
                    </svg>
                    <div class="nav-content-link">お知らせ</div>
                  </div>
                </a>
              </li>
            </ul>
          </div>
        </nav>
      </div>

      <div class="site-header-phone flex-column">
        <div class="title">
            <img src="./Icon/top_icon.png" alt="icon">
            <h1>よりよい防災マップ @Web</h1>
            <nav class="navbar navbar-center">
              <button class="navbar-toggler" type="button" data-bs-toggle="offcanvas" data-bs-target="#offcanvasMenu" aria-controls="offcanvasMenu">
                <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" fill="currentColor" class="bi bi-list" viewBox="0 0 16 16">
                  <path fill-rule="evenodd" d="M2.5 12a.5.5 0 0 1 .5-.5h10a.5.5 0 0 1 0 1H3a.5.5 0 0 1-.5-.5m0-4a.5.5 0 0 1 .5-.5h10a.5.5 0 0 1 0 1H3a.5.5 0 0 1-.5-.5m0-4a.5.5 0 0 1 .5-.5h10a.5.5 0 0 1 0 1H3a.5.5 0 0 1-.5-.5"/>
                </svg>
              </button>
            </nav>
        </div>
        <!--<h3 class="font_mid" style="color: #3b864a; font-size: 3vw;">長野工業高校</h3>-->
      </div>
    </header>

    <!-- オフキャンバスメニュー（上から表示） -->
    <div class="offcanvas offcanvas-top" tabindex="-1" id="offcanvasMenu" aria-labelledby="offcanvasMenuLabel">
      <div class="offcanvas-body">
        <a class="active" href="./index.html">
          <div class="offcanvas-link offcanvas-link-selected">
            <svg xmlns="http://www.w3.org/2000/svg" width="30" height="30" fill="currentColor" class="bi bi-house-door-fill" viewBox="0 0 16 16">
              <path d="M6.5 14.5v-3.505c0-.245.25-.495.5-.495h2c.25 0 .5.25.5.5v3.5a.5.5 0 0 0 .5.5h4a.5.5 0 0 0 .5-.5v-7a.5.5 0 0 0-.146-.354L13 5.793V2.5a.5.5 0 0 0-.5-.5h-1a.5.5 0 0 0-.5.5v1.293L8.354 1.146a.5.5 0 0 0-.708 0l-6 6A.5.5 0 0 0 1.5 7.5v7a.5.5 0 0 0 .5.5h4a.5.5 0 0 0 .5-.5"/>
            </svg>
            <div class="offcanvas-content">HOME</div>
          </div>
        </a>
        <a class="active" href="./about.html">
          <div class="offcanvas-link">
            <svg xmlns="http://www.w3.org/2000/svg" width="30" height="30" fill="currentColor" class="bi bi-exclamation-circle-fill" viewBox="0 0 16 16">
              <path d="M16 8A8 8 0 1 1 0 8a8 8 0 0 1 16 0M8 4a.905.905 0 0 0-.9.995l.35 3.507a.552.552 0 0 0 1.1 0l.35-3.507A.905.905 0 0 0 8 4m.002 6a1 1 0 1 0 0 2 1 1 0 0 0 0-2"/>
            </svg>
            <div class="offcanvas-content">よりよい防災マップとは</div>
          </div>
        </a>
        <a class="active" href="./detail.html">
          <div class="offcanvas-link">
            <svg xmlns="http://www.w3.org/2000/svg" width="30" height="30" fill="currentColor" class="bi bi-geo-alt-fill" viewBox="0 0 16 16">
              <path d="M8 16s6-5.686 6-10A6 6 0 0 0 2 6c0 4.314 6 10 6 10m0-7a3 3 0 1 1 0-6 3 3 0 0 1 0 6"/>
            </svg>
            <div class="offcanvas-content">掲載情報について</div>
          </div>
        </a>
        <a class="active" href="./howto.html">
          <div class="offcanvas-link">
            <svg xmlns="http://www.w3.org/2000/svg" width="30" height="30" fill="currentColor" class="bi bi-question-circle-fill" viewBox="0 0 16 16">
              <path d="M16 8A8 8 0 1 1 0 8a8 8 0 0 1 16 0M5.496 6.033h.825c.138 0 .248-.113.266-.25.09-.656.54-1.134 1.342-1.134.686 0 1.314.343 1.314 1.168 0 .635-.374.927-.965 1.371-.673.489-1.206 1.06-1.168 1.987l.003.217a.25.25 0 0 0 .25.246h.811a.25.25 0 0 0 .25-.25v-.105c0-.718.273-.927 1.01-1.486.609-.463 1.244-.977 1.244-2.056 0-1.511-1.276-2.241-2.673-2.241-1.267 0-2.655.59-2.75 2.286a.237.237 0 0 0 .241.247m2.325 6.443c.61 0 1.029-.394 1.029-.927 0-.552-.42-.94-1.029-.94-.584 0-1.009.388-1.009.94 0 .533.425.927 1.01.927z"/>
            </svg>
            <div class="offcanvas-content">使い方</div>
          </div>
        </a>
        <a class="active" href="./info.html">
          <div class="offcanvas-link">
            <svg xmlns="http://www.w3.org/2000/svg" width="30" height="30" fill="currentColor" class="bi bi-info-circle-fill" viewBox="0 0 16 16">
              <path d="M8 16A8 8 0 1 0 8 0a8 8 0 0 0 0 16m.93-9.412-1 4.705c-.07.34.029.533.304.533.194 0 .487-.07.686-.246l-.088.416c-.287.346-.92.598-1.465.598-.703 0-1.002-.422-.808-1.319l.738-3.468c.064-.293.006-.399-.287-.47l-.451-.081.082-.381 2.29-.287zM8 5.5a1 1 0 1 1 0-2 1 1 0 0 1 0 2"/>
            </svg>
            <div class="offcanvas-content">お知らせ</div>
          </div>
        </a>
      </div>
    </div>

    <div class="bezel fix-height">
      <div class="container">
        <!--見出し(PC)-->
        <div class="heading-pc d-none d-lg-block">
          <div class="heading">
            <svg xmlns="http://www.w3.org/2000/svg" width="30px" height="30px" fill="currentColor" class="bi bi-house-door-fill" viewBox="0 0 16 16">
              <path d="M6.5 14.5v-3.505c0-.245.25-.495.5-.495h2c.25 0 .5.25.5.5v3.5a.5.5 0 0 0 .5.5h4a.5.5 0 0 0 .5-.5v-7a.5.5 0 0 0-.146-.354L13 5.793V2.5a.5.5 0 0 0-.5-.5h-1a.5.5 0 0 0-.5.5v1.293L8.354 1.146a.5.5 0 0 0-.708 0l-6 6A.5.5 0 0 0 1.5 7.5v7a.5.5 0 0 0 .5.5h4a.5.5 0 0 0 .5-.5"/>
            </svg>
            <h2>HOME</h2>
          </div>
        </div>

        <!--見出し(携帯)-->
        <div class="heading-phone d-block d-lg-none">
          <div class="heading">
            <svg xmlns="http://www.w3.org/2000/svg" width="25px" height="25px" fill="currentColor" class="bi bi-house-door-fill" viewBox="0 0 16 16">
              <path d="M6.5 14.5v-3.505c0-.245.25-.495.5-.495h2c.25 0 .5.25.5.5v3.5a.5.5 0 0 0 .5.5h4a.5.5 0 0 0 .5-.5v-7a.5.5 0 0 0-.146-.354L13 5.793V2.5a.5.5 0 0 0-.5-.5h-1a.5.5 0 0 0-.5.5v1.293L8.354 1.146a.5.5 0 0 0-.708 0l-6 6A.5.5 0 0 0 1.5 7.5v7a.5.5 0 0 0 .5.5h4a.5.5 0 0 0 .5-.5"/>
            </svg>
            <h2>HOME</h2>
          </div>
        </div>

        <div class="row font pt-5 d-none d-lg-block" style="font-size: 15px;">
            <p>発災時に役立つ情報をまとめた防災マップです。<br>
              各ポイントのアイコンをクリックすることで、詳細な情報を確認することができます。<br>
              チェックボックスをクリックすることで、ピンの表示/非表示を切り替えることができます。<br>
              ピンの画像は、クリック(タップ)することで拡大表示できます。
            </p>
            <p>
              各施設の詳細情報は<a class="link" href="./detail.html">コチラ</a>からご覧ください。
            </p>
        </div>
        <div class="row font pt-5 d-block d-lg-none" style="font-size: 15px;">
          <p>発災時に役立つ情報をまとめた防災マップです。<br>
            各ポイントのアイコンをクリックすることで、詳細な情報を確認することができます。<br>
            チェックボックスをクリックすることで、ピンの表示/非表示を切り替えることができます。<br>
            ピンの画像は、クリック(タップ)することで拡大表示できます。
          </p>
          <p>
            各施設の詳細情報は<a href="./detail.html">コチラ</a>からご覧ください。
          </p>
      </div>

        <div class="row d-flex flex-nowrap">
          <!-- マップ -->
          <div class="order-2 display_map">
            <div id="map"></div>
          </div>

          <!-- チェックボックス -->
          <div class="order-1 filter-field">
              <!--選択フォーム-->
              <div class="filter-spots">
                <form name="icon_select_point">
                  <!-- フリーWi-Fi -->
                  <div class="div-checkbox">
                    <input class="form-check-input" type="checkbox" name="WiFi" id="WiFi" onclick="Check()">
                    <label class="form-check-label font" for="WiFi"><img class="form-check-icon" src="./Icon/FreeWi-Fi.png" alt="FreeWi-Fi_icon">フリーWi-Fi</label>
                  </div>
                  <!-- 災害ベンダー -->
                  <div class="div-checkbox">
                    <input class="form-check-input" type="checkbox" name="vendor" id="vendor" onclick="Check()" checked>
                    <label class="form-check-label font" for="vendor"><img class="form-check-icon" src="./Icon/Disaster Vendor.png" alt="災害ベンダー_icon">災害ベンダー</label>
                  </div>
                  <!-- 安心の蛇口 -->
                  <div class="div-checkbox">
                    <input class="form-check-input" type="checkbox" name="safeFaucet" id="safeFaucet" onclick="Check()">
                    <label class="form-check-label font" for="safeFaucet"><img class="form-check-icon" src="./Icon/ alt="安心の蛇口_icon">安心の蛇口</label>
                  </div>
                  <div class="accordion-body">
                    <!-- 広域避難場所 -->
                    <div class="div-checkbox">
                      <input class="form-check-input" type="checkbox" name="DisasterArea_Wide" id="DisasterArea_Wide" onclick="Check_DW()" checked>
                      <label class="form-check-label font" for="DisasterArea_Wide"><img class="form-check-icon" src="./Icon/Wide area evacuation site.png" alt="広域避難場所_icon">広域避難場所</label>
                    </div>
                    <details class="ms-3">
                      <summary class="font_mid txt-more-narrow-down">さらに絞り込む</summary>
                      <span style="display: flex; height: 15px !important;">
                        &emsp;<input class="form-check-input" type="checkbox" name="DisasterArea_Wide_Designated" id="DisasterArea_Wide_Designated">
                        <label style="height: 10px;" class="form-check-label" for="DisasterArea_Wide_Designated">指定避難所</label>
                      </span>
                    </details>
                    <!--絞り込み検索(広域避難場所にチェックが入った時のみ表示したい！！！)-->
                    <script>
                      function Check_DW() {
                        var isWideChecked = document.icon_select_point.DisasterArea_Wide.checked;
                        if (isWideChecked && !kmlLayer_ew) {
                          // レイヤーが未作成でチェックがONの場合に読み込み
                          document.getElementById("DisasterArea_Wide_Designated").checked = false;
                          kmlLayer_ew = omnivore.kml('./PlaceData/WideAreaEvacuationSite.kml').on('ready', function () {
                              kmlLayer_ew.eachLayer(function (layer) {
                                  if (layer instanceof L.Marker) {
                                      var feature = layer.feature; // GeoJSON feature
                                      var category = feature.properties['category'];

                                      // カテゴリに応じたアイコン設定
                                      if (category === 'Evacuation_Wide') {
                                          layer.setIcon(Icon_Evacuation_Wide); // 広域避難場所
                                      } else {
                                          layer.setIcon(Icon_Error); // エラー表示
                                      }

                                      // 広域避難場所リストに追加
                                      wideMarkers.push(layer);

                                      // 指定避難所かどうかの判定
                                      if (feature.properties['指定避難所'] === '○') {
                                          designatedMarkers.push(layer);
                                      }

                                      // ポップアップを設定
                                      layer.bindPopup(layer.feature.properties.description);
                                  }
                              });
                            }).addTo(map);
                          } else if (!isWideChecked && kmlLayer_ew) {
                              // チェックがOFFの場合、レイヤを削除
                              map.removeLayer(kmlLayer_ew);
                              kmlLayer_ew = null; // レイヤを削除したらnullにしておく
                              wideMarkers = [];
                              designatedMarkers = [];
                          
                              document.getElementById("DisasterArea_Wide_Designated").checked = false;
                          }

                          // チェックがONの場合、絞り込みを反映
                          if (isWideChecked) {
                              Selected();
                          }
                      }
                      function Selected() {
                          // 広域避難所のチェック状態を確認
                          var isWideChecked = document.icon_select_point.DisasterArea_Wide.checked;
                      
                          // 広域避難所がチェックされていない場合は処理を終了
                          if (!isWideChecked) {
                              return;
                          }
                        
                          // 絞り込みチェックボックスの状態取得
                          var isDesignatedChecked = document.getElementById("DisasterArea_Wide_Designated").checked;
                        
                          // すべての広域避難場所マーカーを一旦非表示
                          wideMarkers.forEach(marker => map.removeLayer(marker));
                        
                          if (isDesignatedChecked) {
                              // 指定避難所のみ表示
                              designatedMarkers.forEach(marker => marker.addTo(map));
                          } else {
                              // 全ての広域避難場所を表示
                              wideMarkers.forEach(marker => marker.addTo(map));
                          }
                      }

                      // 広域避難所チェックボックスのイベントリスナー
                      document.getElementById("DisasterArea_Wide").addEventListener("change", Check_DW);

                      // 指定避難所チェックボックスのイベントリスナー
                      document.getElementById("DisasterArea_Wide_Designated").addEventListener("change", Selected);
                    </script>
                  </div>
                  <!-- 指定緊急避難場所 -->
                  <div class="div-checkbox">
                    <input class="form-check-input" type="checkbox" name="Evacuation_Designated" id="Evacuation_Designated" onclick="Check()">
                    <label class="form-check-label font" for="Evacuation_Designated"><img class="form-check-icon" src="./Icon/Designated emergency evacuation site.png" alt="指定緊急避難場所_icon">指定緊急避難場所</label>
                    <!--絞り込み検索-->
                    <!-- <details class="ms-3">
                      <summary class="font_mid mt-1">さらに絞り込む</summary>
                      <div class="mt-2">
                        &emsp;<input class="form-check-input mt-0" type="checkbox" name="DisasterArea_Wide_flood" id="DisasterArea_Wide_flood" onclick="Selected('DisasterArea_Wide_flood')" checked>
                        <label class="form-check-label font" for="DisasterArea_Wide_Designated">洪水等</label>
                      </div>
                    </details> -->
                  </div>
                  <!-- 薬局・ドラッグストア -->
                  <div class="div-checkbox">
                    <input class="form-check-input" type="checkbox" name="DrugStore" id="DrugStore" onclick="Check()">
                    <label class="form-check-label font" for="Drugstore"><img class="form-check-icon" src="./Icon/drug store.png" alt="ドラッグストア_icon">薬局・ドラッグストア</label>
                  </div>
                  <!-- コインランドリー -->
                  <div class="div-checkbox">
                    <input class="form-check-input" type="checkbox" name="Laundry" id="Laundry" onclick="Check()">
                    <label class="form-check-label font" for="Laundry"><img class="form-check-icon" src="./Icon/coinraundry.png" alt="コインランドリー_icon">コインランドリー</label>
                  </div>
                  <!-- 入浴施設 -->
                  <div class="div-checkbox">
                    <input class="form-check-input" type="checkbox" name="HotSpring" id="HotSpring" onclick="Check()">
                    <label class="form-check-label font" for="HotSpring"><img class="form-check-icon" src="./Icon/hot spring.png" alt="入浴施設_icon">入浴施設</label>
                  </div>
                  <!-- 公衆トイレ -->
                  <div class="div-checkbox">
                    <input class="form-check-input" type="checkbox" name="PublicToilet" id="PublicToilet" onclick="Check()">
                    <label class="form-check-label font" for="PublicToilet"><img class="form-check-icon" src="./Icon/restroom.png" alt="公衆トイレ_icon">公衆トイレ</label>
                  </div>
                  <!-- 公衆電話 -->
                  <div class="div-checkbox">
                    <input class="form-check-input" type="checkbox" name="PublicPhone" id="PublicPhone" onclick="Check()">
                    <label class="form-check-label font" for="PublicPhone"><img class="form-check-icon" src="./Icon/phone.png" alt="公衆電話_icon">公衆電話</label>
                  </div>
                  <!-- コンビニ -->
                  <div class="div-checkbox">
                    <input class="form-check-input" type="checkbox" name="ConvenienceStore" id="ConvenienceStore" onclick="CheckAll()">
                    <label class="form-check-label font" for="ConvenienceStore">コンビニエンスストア</label>
                  </div>
                  <!--セブンイレブン-->
                  <div class="div-checkbox px-2">
                    <input class="form-check-input" type="checkbox" name="ConvenienceStore_SevenEleven" id="ConvenienceStore_SevenEleven" onclick="Check()">
                    <label class="form-check-label font" for="ConvenienceStore_SevenEleven"><img class="form-check-icon" src="./Icon/convenience.png" alt="セブンイレブン_icon">セブンイレブン</label>
                  </div>
                  <!--ファミマ-->
                  <div class="div-checkbox px-2">
                    <input class="form-check-input" type="checkbox" name="ConvenienceStore_FamilyMart" id="ConvenienceStore_FamilyMart" onclick="Check()">
                    <label class="form-check-label font" for="ConvenienceStore_FamilyMart"><img class="form-check-icon" src="./Icon/FamilyMart.png" alt="ファミリーマート_icon">ファミリーマート</label>
                  </div>
                  <!--ローソン-->
                  <div class="div-checkbox px-2">
                    <input class="form-check-input" type="checkbox" name="ConvenienceStore_Lawson" id="ConvenienceStore_Lawson" onclick="Check()">
                    <label class="form-check-label font" for="ConvenienceStore_Lawson"><img class="form-check-icon" src="./Icon/LAWSON.png" alt="ローソン_icon">ローソン</label>
                  </div>
                  <!-- 携帯会社 -->
                  <div class="div-checkbox">
                    <input class="form-check-input" type="checkbox" name="PhoneShop" id="PhoneShop" onclick="CheckAll()">
                    <label class="form-check-label font" for="PhoneShop">携帯会社</label>
                  </div>
                  <!-- auショップ -->
                  <div class="div-checkbox px-2">
                    <input class="form-check-input" type="checkbox" name="PhoneShop_au" id="PhoneShop_au" onclick="Check()">
                    <label class="form-check-label font" for="PhoneShop_au"><img class="form-check-icon" src="./Icon/au.png" alt="auショップ_icon">auショップ</label>
                  </div>
                  <!-- docomo -->
                  <div class="div-checkbox px-2">
                    <input class="form-check-input" type="checkbox" name="PhoneShop_docomo" id="PhoneShop_docomo" onclick="Check()">
                    <label class="form-check-label font" for="PhoneShop_docomo"><img class="form-check-icon" src="./Icon/docomo.png" alt="docomo_icon">docomo</label>
                  </div>
                  <!-- softbank -->
                  <div class="div-checkbox px-2">
                    <input class="form-check-input" type="checkbox" name="PhoneShop_softbank" id="PhoneShop_softbank" onclick="Check()">
                    <label class="form-check-label font" for="PhoneShop_softbank"><img class="form-check-icon" src="./Icon/softbank.png" alt="softbank_icon">softbank</label>
                  </div>
                </form>
              </div>
              <br>
              <!--災害情報表示切替欄-->
              <div class="filter-restricted-area">
                <form name="icon_select_layer">
                  <div class="div-checkbox">
                    <!-- 洪水警戒地域 -->
                    <input class="form-check-input" type="checkbox" name="Flood" id="Flood" onclick="Check()" checked>
                    <label class="form-check-label font" for="Flood">洪水</label>
                  </div>
                  <img id="infoFlood" src="./PlaceData/Immersion_GeneralRules.png"></img>
                <div class="div-checkbox">
                  <!-- 土砂災害警戒区域(土石流) -->
                  <input class="form-check-input" type="checkbox" name="DebrisFlow" id="DebrisFlow" onclick="Check()" checked>
                  <label class="form-check-label font" for="DebrisFlow">土砂災害</label>
                </div>
              </form>
              </div>


              <!-- デバッグモード -->
              <!-- <div class="font_bold my-2">デバッグモード</div>
              <input class="form-check-input my-1" type="checkbox" name="DebagMode" id="DebagMode" onclick="Debag()" checked>
              <label class="form-check-label font my-1" for="DebagMode">全解除</label> -->
          </div>
        </div>

        <!-- 関連リンク -->
        <div class="row font">
          <hr>
          <h2 class="font" style="color: #3b864a;">関連リンク</h2>
          <p>&emsp;<a class="link" href="https://twitter.com/BosaiNaganoPref?ref_src=twsrc%5Egoogle%7Ctwcamp%5Eserp%7Ctwgr%5Eauthor" target="_blank">長野県防災@BosaiNaganoPref(長野県公式アカウント)</a><br></p>
          <p>&emsp;<a class="link" href="https://disaportal.gsi.go.jp/maps/?ll=36.64852,138.194833&z=14&base=pale&vs=c1j0l0u0" target="_blank">重ねるハザードマップ(国土地理院)</a><br></p>
          <div class="install-link">
            <div>信州防災アプリ(インストール)<br></div>
            <div>&emsp;<a class="link" href="https://play.google.com/store/apps/details?id=jp.lg.nagano.pref.naganobousai&hl=ja&gl=US" target="_blank">GooglePlay</a><br></div>
            <div>&emsp;<a class="link" href="https://apps.apple.com/jp/app/%E4%BF%A1%E5%B7%9E%E9%98%B2%E7%81%BD%E3%82%A2%E3%83%97%E3%83%AA/id1569769981" target="_blank">Appstore</a></div>
          </div>
        </div>
      </div>
    </div>

    <footer>
      <div class="footer-left"></div>
      <div class="footer-nav">
        <div class="footer-mutual">
          <p>よりよい防災マップ</p>
          <button onclick="location.href='./enquiries.html'" class="btn-footer">
            お問い合わせ
          </button>
        </div>
        <div class="footer-pc">
          <div class="footer-links">
            <a href="./index.html" class="footer-link">HOME</a>
            <a href="./about.html" class="footer-link">よりよい防災マップとは</a>
            <a href="./detail.html" class="footer-link">掲載情報について</a>
          </div>
          <div class="footer-links">
            <a href="./howto.html" class="footer-link">使い方</a>
            <a href="./info.html" class="footer-link">お知らせ</a>
          </div>
        </div>
      </div>
      <p>©︎ 2025 Haruka Kimura</p>
    </footer>
  </body>

  <script src="./mapSetting.js"></script>
  <!--<script src="./GuideSound.js"></script>-->
</html>
